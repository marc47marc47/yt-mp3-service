# æ§‹å»ºèªªæ˜

YT-MP3 Service è‡ªå‹•åŒ–æ§‹å»ºè…³æœ¬ä½¿ç”¨æŒ‡å—

## å¯ç”¨çš„æ§‹å»ºè…³æœ¬

### 1. Bash è…³æœ¬ (æ¨è–¦)
```bash
# åŸºæœ¬æ§‹å»º
./build.sh

# è³¦äºˆåŸ·è¡Œæ¬Šé™ï¼ˆå¦‚æœéœ€è¦ï¼‰
chmod +x build.sh && ./build.sh
```

### 2. Windows æ‰¹è™•ç†æ–‡ä»¶
```cmd
build.bat
```

### 3. PowerShell è…³æœ¬
```powershell
# åŸºæœ¬æ§‹å»º
.\build.ps1

# ä½¿ç”¨debugæ¨¡å¼
.\build.ps1 -Debug

# è·³éè­‰æ›¸ç”Ÿæˆ
.\build.ps1 -NoCert

# å¼·åˆ¶æ¸…ç†é‡å»º
.\build.ps1 -Clean
```

## æ§‹å»ºéç¨‹

è…³æœ¬æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š

1. **ğŸ” æª¢æŸ¥ç’°å¢ƒ**
   - é©—è­‰ Rust å·¥å…·éˆ (cargo, rustc)
   - æª¢æŸ¥å¿…è¦çš„ä¾è³´

2. **ğŸ§¹ æ¸…ç†æ§‹å»º**
   - æ¸…ç†ä¹‹å‰çš„ç·¨è­¯ç”¢ç‰©

3. **ğŸ“ æº–å‚™ç›®éŒ„**
   - å‰µå»º `bin/`, `certs/`, `downloads/` ç›®éŒ„

4. **ğŸ”§ ç·¨è­¯å·¥å…·**
   - ç·¨è­¯è­‰æ›¸ç”Ÿæˆå·¥å…· (`cert-gen`)
   - éƒ¨ç½²åˆ° `bin/cert-gen.exe`

5. **ğŸ” ç”Ÿæˆè­‰æ›¸**
   - è‡ªå‹•ç”ŸæˆSSLè‡ªç°½è­‰æ›¸ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
   - ä¿å­˜åˆ° `certs/cert.pem` å’Œ `certs/key.pem`

6. **ğŸš€ ç·¨è­¯æœå‹™å™¨**
   - ç·¨è­¯ä¸»æœå‹™å™¨ (`server`)
   - éƒ¨ç½²åˆ° `bin/server.exe`

7. **âœ… é©—è­‰éƒ¨ç½²**
   - æª¢æŸ¥æ‰€æœ‰æ–‡ä»¶æ˜¯å¦æ­£ç¢ºéƒ¨ç½²
   - é¡¯ç¤ºæ§‹å»ºçµæœå’Œä½¿ç”¨èªªæ˜

## æ§‹å»ºç”¢ç‰©

æ§‹å»ºå®Œæˆå¾Œï¼Œ`bin/` ç›®éŒ„åŒ…å«ï¼š

- `cert-gen.exe` - SSLè­‰æ›¸ç”Ÿæˆå·¥å…·
- `server.exe` - ä¸»æœå‹™å™¨ç¨‹åº
- `yt-dlp.exe` - YouTubeä¸‹è¼‰å·¥å…·ï¼ˆéœ€æ‰‹å‹•æ”¾ç½®ï¼‰
- `ffmpeg.exe`, `ffplay.exe`, `ffprobe.exe` - éŸ³é »è™•ç†å·¥å…·

## ä½¿ç”¨æ–¹æ³•

### ç”Ÿæˆæ–°è­‰æ›¸
```bash
bin/cert-gen.exe
```

### å•Ÿå‹•æœå‹™å™¨
```bash
# ç›´æ¥å•Ÿå‹•
bin/server.exe

# æˆ–ä½¿ç”¨æœå‹™ç®¡ç†è…³æœ¬
scripts/start.bat
```

### è¨ªå•æœå‹™
- HTTP: http://127.0.0.1:3000
- HTTPS: https://127.0.0.1:3443

## æ•…éšœæ’é™¤

### æ¬Šé™å•é¡Œ
å¦‚æœåœ¨Linux/Macä¸Šé‡åˆ°æ¬Šé™å•é¡Œï¼š
```bash
chmod +x build.sh
chmod +x bin/*
```

### Rustå·¥å…·éˆå•é¡Œ
ç¢ºä¿å·²å®‰è£Rustï¼š
```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### è­‰æ›¸å•é¡Œ
é‡æ–°ç”Ÿæˆè­‰æ›¸ï¼š
```bash
rm certs/*
bin/cert-gen.exe
```

### ç«¯å£ä½”ç”¨
å¦‚æœç«¯å£è¢«ä½”ç”¨ï¼Œçµ‚æ­¢ç¾æœ‰é€²ç¨‹ï¼š
```bash
# Linux/Mac
pkill -f server

# Windows
taskkill /F /IM server.exe
```

## é–‹ç™¼æ¨¡å¼

ä½¿ç”¨debugæ¨¡å¼é€²è¡Œé–‹ç™¼ï¼š
```powershell
.\build.ps1 -Debug
```

Debugæ¨¡å¼ç‰¹é»ï¼š
- ç·¨è­¯é€Ÿåº¦æ›´å¿«
- åŒ…å«èª¿è©¦ç¬¦è™Ÿ
- æ–‡ä»¶å¤§å°è¼ƒå¤§
- æ€§èƒ½è¼ƒä½

## ç”Ÿç”¢éƒ¨ç½²

ä½¿ç”¨releaseæ¨¡å¼é€²è¡Œç”Ÿç”¢éƒ¨ç½²ï¼š
```bash
./build.sh  # é»˜èªä½¿ç”¨releaseæ¨¡å¼
```

Releaseæ¨¡å¼ç‰¹é»ï¼š
- ç·¨è­¯æ™‚é–“è¼ƒé•·
- å„ªåŒ–çš„æ©Ÿå™¨ç¢¼
- æ–‡ä»¶å¤§å°è¼ƒå°
- æ€§èƒ½æœ€ä½³